import requests
import builtins

sharepoint_site_id = '65bef1c4-26a7-4eca-872e-56598b881774'
document_library_id = 'b!xPG-Zacmyk6HLlZZi4gXdFA0qB2AAoNFlTsrrOu3WsBoVg2EBYqFR7uUoh4hNlU1'
file_path = 'Users/aamorris/Designer.jpeg'
file_name = 'tls_exfil_example.jpeg'
access_token = 'eyJ0eXAiOiJKV1QiLCJub25jZSI6IkxnY3NkTklHV2JiYmtMYzB2aUUwdVBISjhKcUdjbGxkazNOSDdjVHlhTWMiLCJhbGciOiJSUzI1NiIsIng1dCI6Il9qTndqZVNudlRUSzhYRWRyNVFVUGtCUkxMbyIsImtpZCI6Il9qTndqZVNudlRUSzhYRWRyNVFVUGtCUkxMbyJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9mZTc4NDEwMy05MTE0LTRlODgtODA0Zi1lMzYzYWJiZjcwYTQvIiwiaWF0IjoxNzUxNDE1MDAwLCJuYmYiOjE3NTE0MTUwMDAsImV4cCI6MTc1MTUwMTcwMCwiYWNjdCI6MCwiYWNyIjoiMSIsImFjcnMiOlsicDEiXSwiYWlvIjoiQVlRQWUvOFpBQUFBRTFCNnFYYmVHLzNPbGVFTGJQWFNkeDY5QWpvSkk0d2d6UmtycEorbU5ZN09SaitzZU1TTFFFeTkxYmZjamcyWlpJSWIyMTc3OSttL1AxNFJSbFdqWDZ6N0JTNDlhdVJxSVd4cHBTQjNqYlYxV1d3N2RXQ2VCQ2c2M1V4eFlWOFR3ejhlK2hPVnB2a2xWWmptVjZOblc5dUJVWHk0ZGN6S0VtSHJFd1ozaUtrPSIsImFtciI6WyJwd2QiLCJtZmEiXSwiYXBwX2Rpc3BsYXluYW1lIjoiR3JhcGggRXhwbG9yZXIiLCJhcHBpZCI6ImRlOGJjOGI1LWQ5ZjktNDhiMS1hOGFkLWI3NDhkYTcyNTA2NCIsImFwcGlkYWNyIjoiMCIsImZhbWlseV9uYW1lIjoiTW9ycmlzb24iLCJnaXZlbl9uYW1lIjoiQWFyb24iLCJpZHR5cCI6InVzZXIiLCJpcGFkZHIiOiIxMjAuMTU2LjE0MC4yMDciLCJuYW1lIjoiQWFyb24gTW9ycmlzb24iLCJvaWQiOiJkNGUyZDJkZC05YjhmLTRlYjUtODQwNi01ZTZhMTUwZDhiMjgiLCJwbGF0ZiI6IjMiLCJwdWlkIjoiMTAwMzIwMDRBNjQwQTA5OSIsInJoIjoiMS5BV0VCQTBGNF9oU1JpRTZBVC1OanE3OXdwQU1BQUFBQUFBQUF3QUFBQUFBQUFBREtBU3hoQVEuIiwic2NwIjoiRmlsZXMuUmVhZCBGaWxlcy5SZWFkLkFsbCBGaWxlcy5SZWFkV3JpdGUgRmlsZXMuUmVhZFdyaXRlLkFsbCBvcGVuaWQgcHJvZmlsZSBTaXRlcy5GdWxsQ29udHJvbC5BbGwgU2l0ZXMuTWFuYWdlLkFsbCBTaXRlcy5SZWFkLkFsbCBTaXRlcy5SZWFkV3JpdGUuQWxsIFNpdGVzLlNlbGVjdGVkIFVzZXIuUmVhZCBlbWFpbCIsInNpZCI6IjAwNmIyNWM5LTAzYWQtYjYzYy0yZDI4LTRmNTUxNzhmZjAxNiIsInNpZ25pbl9zdGF0ZSI6WyJrbXNpIl0sInN1YiI6IjJjVHNna1JaZ3lDS1lvWTBmbmlLS28wOHJCdVY3X21ld3VVcVFaLW9MMXMiLCJ0ZW5hbnRfcmVnaW9uX3Njb3BlIjoiTkEiLCJ0aWQiOiJmZTc4NDEwMy05MTE0LTRlODgtODA0Zi1lMzYzYWJiZjcwYTQiLCJ1bmlxdWVfbmFtZSI6IkRldkFkbWluX2FhbW9ycmlzQG42eDYub25taWNyb3NvZnQuY29tIiwidXBuIjoiRGV2QWRtaW5fYWFtb3JyaXNAbjZ4Ni5vbm1pY3Jvc29mdC5jb20iLCJ1dGkiOiJ0OEMwa1dhNjgwdXBPZm82bHhCZEFBIiwidmVyIjoiMS4wIiwid2lkcyI6WyI2MmU5MDM5NC02OWY1LTQyMzctOTE5MC0wMTIxNzcxNDVlMTAiLCJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX2NjIjpbIkNQMSJdLCJ4bXNfZnRkIjoiem44Rk5SRlRJYUNOdkZmWUFsMnR5M0RQUnlBNkItNlpJOTM3MGFrTXBhNEJkWE56YjNWMGFDMWtjMjF6IiwieG1zX2lkcmVsIjoiMjggMSIsInhtc19zc20iOiIxIiwieG1zX3N0Ijp7InN1YiI6InIyM0hCTGVjbjJiT0ZRbjRHdFJPaXE1UVp6SWV4UmN6amF5TmMxbkxkS00ifSwieG1zX3RjZHQiOjE3NDc4NTk5NTV9.s09I5l0QMn1mg7ZNI23p8CxW51k5SWriHX8-g4sUgn3180jvelgE-pVoGNcm7e82memjXayokG0BW8o8fDOaMzBitZxTrczCcBjyIhgrGmDVxlo4uvL_s2b7GsLduyeKNCrUQJWHSpdXFj0CbCs-yQwdmMHAjyEKdNAsIiQukwuF3bSZ8cdIjmHAG5XzxsolOXatiiJsI7tcmwytJJkg4fo5yXy8tUNYaJ8h5DPyNUGXE5pqdI27gzDkOSBEMXjR1MzwKQBgXuNgadF-IwGULPVc_-d5pNvJJMzhbExOcI2hk-Vm5Xl2GkeCnENnpVStJBJ8f1IeAO9Zq8Y3uQvnNA'

upload_url = f'https://graph.microsoft.com/v1.0/sites/{sharepoint_site_id}/drives/{document_library_id}/root:/{file_name}:/content'
headers = {
    'Authorization': f'Bearer {access_token}',
    'Content-Type': 'image/jpeg'
}

with builtins.open(file_path, 'rb') as file_data:
    upload_response = requests.put(upload_url, headers=headers, data=file_data)

if upload_response.status_code in [200, 201]:
    print('File uploaded successfully.')
else:
    print(f'Upload failed: {upload_response.status_code}')
    print(upload_response.text)
